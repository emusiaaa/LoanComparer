@model InquiryString

<div id="loading-div-background">
    <div id="loading-div" class="ui-corner-all">
        <div id="loadingbar"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i></div>
        <h2 style="color:gray;font-weight:normal;">Please wait....</h2>
    </div>
</div>

<table>
    <h1 id="header" style="display:none">Hi!</h1>
    <tbody id="tablebody">
    </tbody>
</table>

<script src="https://kit.fontawesome.com/ebd704dc7e.js" crossorigin="anonymous"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.0.min.js"></script>
<script>
    $(function () {
        $('#loading-div-background').show();

        Promise.resolve($.ajax({
            type: "GET",
            url: "/Home/WaitForOffer?inquiryId=" + @Model.inquiryId.ToString(),
            //dataType: "json"
            
        })).then(function (result) {
            if (result) {
                var offer = $.parseJSON(result);
                
                $('#loading-div-background').hide();
                $("#header").show()
                var row = "";
                $.each(offer, function (index, item) {
                    row += "<tr><td>" + index
                            + "</td><td>" + item + "</td></tr> ";
                });
                $("#tablebody").html(row);
            }
        }).catch(function (e) {
            console.log(e);
        });
    });
</script>
